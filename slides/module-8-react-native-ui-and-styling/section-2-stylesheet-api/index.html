<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Section 2: StyleSheet API and Performance | React Native UI and Styling</title>
  <link rel="stylesheet" href="../../shared/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="slides">
    <!-- Title Slide -->
    <section class="slide title-slide">
      <h1>Section 2</h1>
      <h2>StyleSheet API and Performance</h2>
      <p class="metadata">Module 8 | 45-60 minutes</p>
    </section>
    
    <!-- Learning Objectives Slide -->
    <section class="slide objectives-slide">
      <h2>Learning Objectives</h2>
      <ul>
        <li>Understand the benefits of using the StyleSheet API</li>
        <li>Create optimized styles with StyleSheet.create</li>
        <li>Organize and reuse styles effectively</li>
        <li>Improve application performance with StyleSheet optimization techniques</li>
        <li>Apply composition patterns for complex styles</li>
        <li>Debug style-related issues</li>
      </ul>
      <div class="metadata">
        <p><strong>Time:</strong> 45-60 minutes</p>
        <p><strong>Prerequisites:</strong> Styling Fundamentals in React Native (Section 1)</p>
      </div>
    </section>
    
    <!-- StyleSheet API Introduction Slide -->
    <section class="slide content-slide">
      <h2>Introduction to StyleSheet API</h2>
      <p>The StyleSheet API provides a way to define styles in a more optimized way compared to inline styles:</p>
      <ul>
        <li>Creates an optimized style ID that can be referenced</li>
        <li>Validates style properties at creation time</li>
        <li>Makes styles immutable and opaque</li>
        <li>Improves memory usage and performance</li>
        <li>Improves readability by separating styles from component logic</li>
      </ul>
      <div class="callout info">
        <div class="callout-title">Key Insight</div>
        <p>StyleSheet.create() transforms style objects into optimized style references that React Native can use more efficiently.</p>
      </div>
    </section>
    
    <!-- StyleSheet.create Slide -->
    <section class="slide code-slide">
      <h2>Using StyleSheet.create</h2>
      <pre><code class="language-jsx">
import { View, Text, StyleSheet } from 'react-native';

function MedicationItem({ name, dosage }) {
  return (
    <View style={styles.container}>
      <Text style={styles.name}>{name}</Text>
      <Text style={styles.dosage}>{dosage}</Text>
    </View>
  );
}

// StyleSheet definitions outside of the component
const styles = StyleSheet.create({
  container: {
    padding: 16,
    borderRadius: 8,
    backgroundColor: '#ffffff',
    marginBottom: 8,
  },
  name: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#333333',
    marginBottom: 4,
  },
  dosage: {
    fontSize: 16,
    color: '#666666',
  },
});
      </code></pre>
      <div class="callout warning">
        <div class="callout-title">Best Practice</div>
        <p>Always define styles outside of your component to prevent recreating styles on each render.</p>
      </div>
    </section>
    
    <!-- Performance Benefits Slide -->
    <section class="slide content-slide">
      <h2>Performance Benefits of StyleSheet API</h2>
      <div class="columns">
        <div class="column">
          <h3>Inline Styles Issues</h3>
          <ul>
            <li>Recreated on every render</li>
            <li>Create new objects in memory</li>
            <li>Sent across the bridge repeatedly</li>
            <li>No validation at creation time</li>
            <li>Can lead to UI jank in complex views</li>
          </ul>
        </div>
        <div class="column">
          <h3>StyleSheet Advantages</h3>
          <ul>
            <li>Styles created once, referenced by ID</li>
            <li>More memory efficient</li>
            <li>Only IDs sent across the bridge</li>
            <li>Early error detection</li>
            <li>Enables future optimization potential</li>
          </ul>
        </div>
      </div>
      <div class="callout info">
        <div class="callout-title">Under the Hood</div>
        <p>StyleSheet.create() registers styles once in the native layer, giving them stable IDs that can be reused across renders.</p>
      </div>
    </section>
    
    <!-- Style Organization Slide -->
    <section class="slide content-slide">
      <h2>Organizing Styles Effectively</h2>
      <div class="columns">
        <div class="column">
          <h3>Component-Level Styles</h3>
          <p>Define styles in the same file as the component:</p>
          <pre><code class="language-jsx">
// MedicationItem.js
const styles = StyleSheet.create({
  container: { /* ... */ },
  name: { /* ... */ },
  dosage: { /* ... */ },
});
          </code></pre>
        </div>
        <div class="column">
          <h3>Shared Styles</h3>
          <p>Create reusable style modules:</p>
          <pre><code class="language-jsx">
// styles/common.js
export const colors = {
  primary: '#007AFF',
  background: '#F9F9F9',
  text: '#333333',
  // ...
};

export const typography = {
  heading: {
    fontSize: 24,
    fontWeight: 'bold',
  },
  // ...
};
          </code></pre>
        </div>
      </div>
    </section>
    
    <!-- Style Composition Slide -->
    <section class="slide code-slide">
      <h2>Style Composition Patterns</h2>
      <pre><code class="language-jsx">
import { View, Text, StyleSheet } from 'react-native';
import { colors, typography } from '../styles/common';

function MedicationHeader({ title, isImportant }) {
  return (
    <View style={styles.header}>
      <Text style={[
        styles.title,
        typography.heading,
        isImportant && styles.importantTitle
      ]}>
        {title}
      </Text>
    </View>
  );
}

const styles = StyleSheet.create({
  header: {
    backgroundColor: colors.background,
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: colors.border,
  },
  title: {
    color: colors.text,
  },
  importantTitle: {
    color: colors.warning,
  },
});
      </code></pre>
      <div class="callout info">
        <div class="callout-title">Composition Over Inheritance</div>
        <p>Combine multiple style objects to create complex styling rather than creating deeply nested hierarchies.</p>
      </div>
    </section>
    
    <!-- Dark Mode and Theming with StyleSheet Slide -->
    <section class="slide code-slide">
      <h2>Dynamic Styling with StyleSheet</h2>
      <pre><code class="language-jsx">
import { View, Text, StyleSheet, useColorScheme } from 'react-native';

// Theme definitions
const lightTheme = {
  background: '#FFFFFF',
  text: '#333333',
  border: '#DDDDDD',
};

const darkTheme = {
  background: '#1E1E1E',
  text: '#F0F0F0',
  border: '#444444',
};

function ThemedComponent() {
  // Get the device color scheme
  const colorScheme = useColorScheme();
  
  // Select the appropriate theme
  const theme = colorScheme === 'dark' ? darkTheme : lightTheme;
  
  return (
    <View style={[styles.container, { backgroundColor: theme.background }]}>
      <Text style={[styles.text, { color: theme.text }]}>
        Medication Details
      </Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    padding: 16,
    borderRadius: 8,
    borderWidth: 1,
  },
  text: {
    fontSize: 16,
  },
});
      </code></pre>
    </section>
    
    <!-- StyleSheet Flattening Slide -->
    <section class="slide content-slide">
      <h2>StyleSheet Flattening</h2>
      <p>When you use style arrays, React Native flattens them internally for performance:</p>
      <pre><code class="language-jsx">
// This array of styles:
<View style={[styles.container, styles.elevated, { marginTop: 20 }]} />

// Is flattened internally to an optimized object:
{
  padding: 16,          // from styles.container
  backgroundColor: '#FFF', // from styles.container
  elevation: 4,         // from styles.elevated
  marginTop: 20         // from inline style
}
      </code></pre>
      <div class="callout info">
        <div class="callout-title">Under the Hood</div>
        <p>StyleSheet.flatten() is the internal method used to resolve style arrays into a single style object before applying to a component.</p>
      </div>
      <div class="callout warning">
        <div class="callout-title">Performance Tip</div>
        <p>While React Native optimizes array styles, deeply nested or very large style arrays can still impact performance. Keep your style arrays reasonably sized.</p>
      </div>
    </section>
    
    <!-- StyleSheet Hairlining Slide -->
    <section class="slide content-slide">
      <h2>StyleSheet.hairlineWidth</h2>
      <p>React Native provides a special value for creating the thinnest possible line on a device:</p>
      <pre><code class="language-jsx">
const styles = StyleSheet.create({
  separator: {
    borderBottomWidth: StyleSheet.hairlineWidth,
    borderBottomColor: '#CCCCCC',
  },
});
      </code></pre>
      <div class="columns">
        <div class="column">
          <h3>What It Does</h3>
          <ul>
            <li>Creates device-pixel-perfect thin lines</li>
            <li>Automatically adjusts for pixel density</li>
            <li>Typically 1 physical pixel on the device</li>
            <li>Better than hardcoding values like 0.5</li>
          </ul>
        </div>
        <div class="column">
          <h3>When to Use</h3>
          <ul>
            <li>Dividers and separators</li>
            <li>Borders that should be as thin as possible</li>
            <li>Fine details in custom UI elements</li>
            <li>When consistency across devices is important</li>
          </ul>
        </div>
      </div>
    </section>
    
    <!-- StyleSheet Absolute Fill Slide -->
    <section class="slide content-slide">
      <h2>StyleSheet.absoluteFill</h2>
      <p>A pre-defined style for filling a parent container completely:</p>
      <pre><code class="language-jsx">
const styles = StyleSheet.create({
  overlay: {
    ...StyleSheet.absoluteFill,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
  },
});

// Used like:
<View style={styles.container}>
  <Text>Content goes here</Text>
  {isLoading && <View style={styles.overlay} />}
</View>
      </code></pre>
      <div class="callout info">
        <div class="callout-title">What It Contains</div>
        <p>StyleSheet.absoluteFill is equivalent to:<br/>
        { position: 'absolute', left: 0, right: 0, top: 0, bottom: 0 }</p>
      </div>
      <p>Common use cases: overlays, loaders, absolute positioning over another element</p>
    </section>
    
    <!-- Advanced StyleSheet Composability Slide -->
    <section class="slide code-slide">
      <h2>Advanced Style Composition</h2>
      <pre><code class="language-jsx">
import { View, Text, StyleSheet, Platform } from 'react-native';

function MedicationCard({ medication, isActive, isExpired }) {
  return (
    <View style={[
      styles.card,
      styles.cardWithShadow,
      isActive && styles.activeCard,
      isExpired && styles.expiredCard,
    ]}>
      <Text style={[
        styles.title,
        isExpired && styles.expiredText
      ]}>
        {medication.name}
      </Text>
      {/* Other content */}
    </View>
  );
}

const styles = StyleSheet.create({
  card: {
    padding: 16,
    borderRadius: 8,
    backgroundColor: '#fff',
    margin: 8,
  },
  cardWithShadow: Platform.select({
    ios: {
      shadowColor: '#000',
      shadowOffset: { width: 0, height: 2 },
      shadowOpacity: 0.1,
      shadowRadius: 4,
    },
    android: {
      elevation: 3,
    },
  }),
  activeCard: {
    borderLeftWidth: 4,
    borderLeftColor: '#007AFF',
  },
  expiredCard: {
    backgroundColor: '#FFF8F8',
    borderColor: '#FFD0D0',
    borderWidth: 1,
  },
  title: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#333',
  },
  expiredText: {
    color: '#D32F2F',
  },
});
      </code></pre>
    </section>
    
    <!-- Debugging Styles Slide -->
    <section class="slide content-slide">
      <h2>Debugging Style Issues</h2>
      <div class="columns">
        <div class="column">
          <h3>Common Style Problems</h3>
          <ul>
            <li>Property typos (backgroundColor vs backgroundColour)</li>
            <li>Incorrect property values</li>
            <li>Styles not applying as expected</li>
            <li>Layout not behaving as intended</li>
            <li>Style precedence issues in arrays</li>
          </ul>
        </div>
        <div class="column">
          <h3>Debugging Techniques</h3>
          <ul>
            <li>Add temporary background colors to visualize layout</li>
            <li>Use the React Native Debugger to inspect styles</li>
            <li>Add console.log statements to check style objects</li>
            <li>Check for conflicting styles in arrays</li>
            <li>Verify component type supports the style properties</li>
          </ul>
        </div>
      </div>
      <div class="callout warning">
        <div class="callout-title">Common Mistake</div>
        <p>Remember that React Native won't show warnings for invalid style properties - they're just ignored.</p>
      </div>
    </section>
    
    <!-- Practical Exercise Slide -->
    <section class="slide content-slide">
      <h2>Exercise: Refactoring Inline Styles</h2>
      <p>Refactor the following component with inline styles to use StyleSheet.create:</p>
      <pre><code class="language-jsx">
// Before: Inline styles
import React from 'react';
import { View, Text, Pressable } from 'react-native';

const PrescriptionItem = ({ prescription, onPress }) => {
  return (
    <Pressable 
      onPress={onPress}
      style={{
        backgroundColor: '#fff',
        padding: 16,
        borderRadius: 8,
        marginVertical: 8,
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 1 },
        shadowOpacity: 0.2,
        shadowRadius: 2,
        elevation: 2
      }}
    >
      <Text style={{ fontSize: 18, fontWeight: 'bold', marginBottom: 8 }}>
        {prescription.medication}
      </Text>
      <Text style={{ fontSize: 16, color: '#666', marginBottom: 4 }}>
        {prescription.dosage}
      </Text>
      <Text style={{ fontSize: 14, color: '#888' }}>
        {prescription.instructions}
      </Text>
    </Pressable>
  );
};
      </code></pre>
    </section>
    
    <!-- Exercise Solution Slide -->
    <section class="slide code-slide">
      <h2>Exercise Solution</h2>
      <pre><code class="language-jsx">
// After: Using StyleSheet API
import React from 'react';
import { View, Text, Pressable, StyleSheet, Platform } from 'react-native';

const PrescriptionItem = ({ prescription, onPress }) => {
  return (
    <Pressable 
      onPress={onPress}
      style={styles.container}
    >
      <Text style={styles.medicationName}>
        {prescription.medication}
      </Text>
      <Text style={styles.dosage}>
        {prescription.dosage}
      </Text>
      <Text style={styles.instructions}>
        {prescription.instructions}
      </Text>
    </Pressable>
  );
};

const styles = StyleSheet.create({
  container: {
    backgroundColor: '#fff',
    padding: 16,
    borderRadius: 8,
    marginVertical: 8,
    ...Platform.select({
      ios: {
        shadowColor: '#000',
        shadowOffset: { width: 0, height: 1 },
        shadowOpacity: 0.2,
        shadowRadius: 2,
      },
      android: {
        elevation: 2,
      },
    }),
  },
  medicationName: {
    fontSize: 18,
    fontWeight: 'bold',
    marginBottom: 8,
  },
  dosage: {
    fontSize: 16,
    color: '#666',
    marginBottom: 4,
  },
  instructions: {
    fontSize: 14,
    color: '#888',
  },
});

export default PrescriptionItem;
      </code></pre>
    </section>
    
    <!-- Summary Slide -->
    <section class="slide summary-slide">
      <h2>Section Summary</h2>
      <ul>
        <li>StyleSheet.create() provides performance optimizations over inline styles</li>
        <li>Styles should be defined outside of component functions</li>
        <li>Style arrays allow for composition and conditional styles</li>
        <li>StyleSheet provides utilities like hairlineWidth and absoluteFill</li>
        <li>Organizing styles improves maintainability and readability</li>
        <li>Dynamic styling can be achieved by combining StyleSheet with conditional logic</li>
      </ul>
      <div class="next-steps">
        <p><strong>Next:</strong> Section 3 - Flexbox Layout in React Native</p>
      </div>
    </section>
  </div>
  
  <script src="../../shared/script.js"></script>
</body>
</html> 